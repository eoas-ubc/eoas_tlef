{
 "cells": [
  {
   "cell_type": "code",
   "execution_count": 1,
   "metadata": {},
   "outputs": [],
   "source": [
    "import numpy as np"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "Input and Output\n",
    "================\n",
    "\n",
    "A good relationship depends on good communication. In this chapter you\n",
    "learn how to communicate with Python. Of course, communicating is a\n",
    "two-way street: input and output. Generally, when you have Python\n",
    "perform some task, you need to feed it information---input. When it is\n",
    "done with that task, it reports back to you the results of its\n",
    "calculations---output.\n",
    "\n",
    "There are two venues for input that concern us: the computer keyboard\n",
    "and the input data file. Similarly, there are two venues for output: the\n",
    "computer screen and the output data file. We start with input from the\n",
    "keyboard and output to the computer screen. Then we deal with data file\n",
    "input and output---or \"io.\""
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "Keyboard input\n",
    "--------------\n",
    "\n",
    "Many computer programs need input from the user. In `chap2:ScriptExmp1`,\n",
    "the program needed the distance traveled as an input in order to\n",
    "determine the duration of the trip and the cost of the gasoline. As you\n",
    "might like to use this same script to determine the cost of several\n",
    "different trips, it would be useful if the program requested that input\n",
    "when it was run from the IPython shell.\n",
    "\n",
    "Python has a function called `input`\n",
    "for getting input from the user and assigning it a variable name. It has\n",
    "the form"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 2,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "prompt to user \n"
     ]
    }
   ],
   "source": [
    "strname = input(\"prompt to user \")"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "When the `input` statement is executed, it prints the text in the\n",
    "quotes to the computer screen and waits for input from the user. The\n",
    "user types a string of characters and presses the return key. The\n",
    "`input` function then assigns that string to the variable name on\n",
    "the right of the assignment operator `=`.\n",
    "\n",
    "Let's try it out this snippet of code in the IPython shell."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 3,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Input distance of trip in miles: 450\n"
     ]
    }
   ],
   "source": [
    "distance = input(\"Input distance of trip in miles: \")"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "Python prints out the string argument of the `input` function and\n",
    "waits for a response from you. Let's go ahead and type `450` for \"450\n",
    "miles\" and press return. Now type the variable name `distance` to see\n",
    "its value"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 4,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/plain": [
       "'450'"
      ]
     },
     "execution_count": 4,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "distance"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "The value of the `distance` is `450` as expected, but it is a string\n",
    "(the `u` stands for \"unicode\" which refers to the string coding system\n",
    "Python uses). Because we want to use `450` as a number and not a\n",
    "distance, we need to convert it from a string to a number. We can do\n",
    "that with the `eval` function by writing"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 5,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/plain": [
       "450"
      ]
     },
     "execution_count": 5,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "distance = eval(distance)\n",
    "distance"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "The `eval` function has converted `distance` to an integer. This is fine\n",
    "and we are ready to move on. However, we might prefer that `distance` be\n",
    "a float instead of an integer. There are two ways to do this. We could\n",
    "assume the user is very smart and will type \"`450.`\" instead of \"`450`\",\n",
    "which will cause distance to be a float when `eval` does the conversion.\n",
    "That is, the number 450 is dynamically typed to be a float or an integer\n",
    "depending on whether or not the user uses a decimal point.\n",
    "Alternatively, we could use the function `float` in place of `eval`,\n",
    "which would ensure that `distance` is a floating point variable. Thus,\n",
    "our code would look like this (including the user response):"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 6,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Input distance of trip in miles: 450\n"
     ]
    },
    {
     "data": {
      "text/plain": [
       "'450'"
      ]
     },
     "execution_count": 6,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "distance = input(\"Input distance of trip in miles: \")\n",
    "distance"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 7,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/plain": [
       "450.0"
      ]
     },
     "execution_count": 7,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "distance = float(distance)\n",
    "distance"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "Now let's incorporate what we have learned into the code we wrote for\n",
    "`chap2:ScriptExmp1`"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 8,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Input distance of trip in miles: 450\n"
     ]
    }
   ],
   "source": [
    "# Calculates time, gallons of gas used, and cost of gasoline for a trip\n",
    "\n",
    "distance = input(\"Input distance of trip in miles: \")\n",
    "distance = float(distance)\n",
    "\n",
    "mpg = 30.               # car mileage\n",
    "speed = 60.             # average speed\n",
    "costPerGallon = 4.10    # price of gas\n",
    "\n",
    "time = distance/speed\n",
    "gallons = distance/mpg\n",
    "cost = gallons*costPerGallon"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "Lines 4 and 5 can be combined into a single line, which is a little more\n",
    "efficient:"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 9,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Input distance of trip in miles: 450\n"
     ]
    }
   ],
   "source": [
    "distance = float(input(\"Input distance of trip in miles: \"))"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "Whether you use `float` or `int` or `eval` depends on whether you want a\n",
    "float, an integer, or a dynamically typed variable. In this program, it\n",
    "doesn't matter.\n",
    "\n",
    "Now you can simply run the program and then type `time`, `gallons`, and\n",
    "`cost` to view the results of the calculations done by the program.\n",
    "\n",
    "Before moving on to output, we note that sometimes you may want string\n",
    "input rather that numerical input. For example, you might want the user\n",
    "to input their name, in which case you would simply use the `input`\n",
    "function without converting its output."
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "Screen output\n",
    "-------------\n",
    "\n",
    "It would be much more convenient if the program in the previous section\n",
    "would simply write its output to the computer screen, instead of\n",
    "requiring the user to type `time`, `gallons`, and `cost` to view the\n",
    "results. Fortunately, this can be accomplished very simply using\n",
    "Python's `print` function. For example, simply including the statement\n",
    "`print(time, gallons, cost)` after line 12, running the program would\n",
    "give the following result:"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "``` ipython\n",
    "In [1]: run myTripIO.py\n",
    "\n",
    "What is the distance of your trip in miles? 450\n",
    "(7.5, 15.0, 61.49999999999999)\n",
    "```"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "The program prints out the results as a tuple of time (in hours),\n",
    "gasoline used (in gallons), and cost (in dollars). Of course, the\n",
    "program doesn't give the user a clue as to which quantity is which. The\n",
    "user has to know.\n",
    "\n",
    "### Formatting output with `str.format()`\n",
    "\n",
    "We can clean up the output of the example above and make it considerably\n",
    "more user friendly. The program below demonstrates how to do this."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 10,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Input distance of trip in miles: 450\n",
      "\n",
      "Duration of trip = 7.5 hours\n",
      "Gasoline used = 15.0 gallons (@ 30 mpg)\n",
      "Cost of gasoline = $61.50 (@ $4.10/gallon)\n"
     ]
    }
   ],
   "source": [
    "# Calculates time, gallons of gas used, and cost of gasoline for\n",
    "# a trip\n",
    "\n",
    "distance = float(input(\"Input distance of trip in miles: \"))\n",
    "mpg = 30.               # car mileage\n",
    "speed = 60.             # average speed\n",
    "costPerGallon = 4.10    # price of gas\n",
    "\n",
    "time = distance/speed\n",
    "gallons = distance/mpg\n",
    "cost = gallons*costPerGallon\n",
    "\n",
    "print(\"\\nDuration of trip = {0:0.1f} hours\".format(time))\n",
    "print(\"Gasoline used = {0:0.1f} gallons (@ {1:0.0f} mpg)\"\n",
    "      .format(gallons, mpg))\n",
    "print(\"Cost of gasoline = ${0:0.2f} (@ ${1:0.2f}/gallon)\"\n",
    "      .format(cost, costPerGallon))"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "The final two `print` function calls in this script are continued on a\n",
    "second line in order to improve readability. Running this program, with\n",
    "the distance provided by the user, gives"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 11,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "What is the trip distance in miles? 450\n",
      "\n",
      "Duration of trip = 7.5 hours\n",
      "Gasoline used = 15.0 gallons (@ 30 mpg)\n",
      "Cost of gasoline = $61.50 (@ $4.10/gallon)\n"
     ]
    }
   ],
   "source": [
    "run myTripNiceIO.py"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "Now the output is presented in a way that is immediately understandable\n",
    "to the user. Moreover, the numerical output is formatted with an\n",
    "appropriate number of digits to the right of the decimal point. For good\n",
    "measure, we also included the assumed mileage (30 mpg) and the cost of\n",
    "the gasoline. All of this is controlled by the `str.format()` function\n",
    "within the `print` function.\n",
    "\n",
    "The argument of the `print` function is of the form `str.format()` where\n",
    "`str` is a string that contains text that is written to be the screen,\n",
    "as well as certain format specifiers contained in curly braces `{}`. The\n",
    "`format` function contains the list of variables that are to be printed.\n",
    "\n",
    "- The `\\n` at the start of the string in the `print` statement on line 12 in the newline character. It creates the blank line before the output is printed.\n",
    "- The positions of the curly braces determine where the variables in the `format` function at the end of the statement are printed.\n",
    "- The format string inside the curly braces specifies how each variable in the `format` function is printed.\n",
    "- The number before the colon in the format string specifies which variable in the list in the `format` function is printed. Remember, Python is zero-indexed, so 0 means the first variable is printed, 1 means the second variable, *etc*.\n",
    "-  The zero after the colon specifies the *minimum* number of spaces reserved for printing out the variable in the format function. A zero means that only as many spaces as needed will be used.\n",
    "- The number after the period specifies the number of digits to the right of the decimal point that will be printed: `1` for `time` and `gallons` and `2` for `cost`.\n",
    "- The `f` specifies that a number with a fixed number of decimal points. If the `f` format specifier is replaced with `e`, then the number is printed out in exponential format (scientific notation).\n",
    "\n",
    "In addition to `f` and `e` format types, there are two more that are\n",
    "commonly used: `d` for integers (digits) and `s` for strings. There are,\n",
    "in fact, many more formatting possibilities. Python has a whole \"Format\n",
    "Specification Mini-Language\" that is documented at\n",
    "<http://docs.python.org/library/string.html#formatspec>. It's very\n",
    "flexible but arcane. You might find it simplest to look at the \"Format\n",
    "examples\" section further down the same web page.\n",
    "\n",
    "The program below illustrates most of the formatting you will need for\n",
    "writing a few variables, be they strings, integers, or floats, to screen\n",
    "or to data files (which we discuss in the next section)."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 12,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      " ***\n",
      "How\n",
      "How are you my friend?\n",
      " 1. How are you my friend?\n",
      " 2. How are you my friend?\n",
      " 3. How How are you my friend? - How are you my friend?\n",
      " 4. How       are you my friend?\n",
      " ***\n",
      "34 942885\n",
      " 6. 34 942885\n",
      " 7.       34     942885\n",
      " ***\n",
      " 8. -3.000\n",
      " 9. -3.000\n",
      "10.   -3.000\n",
      "11.   -3.00011.   -3.000\n",
      " ***\n",
      "12. 3.142e-14\n",
      "13.  3.142e-14\n",
      "14.      0.000\n",
      " ***\n",
      "15. 12345678901234567890\n",
      "16. are you my friend?--      34, 3.142e-14\n"
     ]
    }
   ],
   "source": [
    "string1 = \"How\"\n",
    "string2 = \"are you my friend?\"\n",
    "int1 = 34\n",
    "int2 = 942885\n",
    "float1 = -3.0\n",
    "float2 = 3.141592653589793e-14\n",
    "\n",
    "print(' ***')\n",
    "print(string1)\n",
    "print(string1 + ' ' + string2)\n",
    "print(' 1. {} {}'.format(string1, string2))\n",
    "print(' 2. {0:s} {1:s}'.format(string1, string2))\n",
    "print(' 3. {0:s} {0:s} {1:s} - {0:s} {1:s}'\n",
    "      .format(string1, string2))\n",
    "print(' 4. {0:10s}{1:5s}'\n",
    "      .format(string1, string2))\n",
    "print(' ***')\n",
    "print(int1, int2)\n",
    "print(' 6. {0:d} {1:d}'.format(int1, int2))\n",
    "print(' 7. {0:8d} {1:10d}'.format(int1, int2))\n",
    "print(' ***')\n",
    "print(' 8. {0:0.3f}'.format(float1))\n",
    "print(' 9. {0:6.3f}'.format(float1))\n",
    "print('10. {0:8.3f}'.format(float1))\n",
    "print(2*'11. {0:8.3f}'.format(float1))\n",
    "print(' ***')\n",
    "print('12. {0:0.3e}'.format(float2))\n",
    "print('13. {0:10.3e}'.format(float2))\n",
    "print('14. {0:10.3f}'.format(float2))\n",
    "print(' ***')\n",
    "print('15. 12345678901234567890')\n",
    "print('16. {0:s}--{1:8d},{2:10.3e}'\n",
    "      .format(string2, int1, float2))"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "Successive empty brackets `{}` like those that appear in the statement\n",
    "above `print(' 1. {} {}'.format(string1, string2))` are numbered\n",
    "consecutively starting at 0 and will print out whatever variables appear\n",
    "inside the `format()` method using their default format.\n",
    "\n",
    "Finally, note that the code starting on lines 14 and 16 each are split\n",
    "into two lines. We have done this so that the lines fit on the page\n",
    "without running off the edge. Python allows you to break lines up like\n",
    "this to improve readability."
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "### Printing arrays\n",
    "\n",
    "Formatting NumPy arrays for printing requires another approach. As an\n",
    "example, let's create an array and then format it in various ways. From\n",
    "the IPython terminal"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 13,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "[ 3.          5.66666667  8.33333333 11.         13.66666667 16.33333333\n",
      " 19.        ]\n"
     ]
    }
   ],
   "source": [
    "a = np.linspace(3, 19, 7)\n",
    "print(a)"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "Simply using the `print` function does print out the array, but perhaps\n",
    "not in the format you desire. To control the output format, you use the\n",
    "NumPy function `set_printoptions`. For example, suppose you want to see\n",
    "no more than two digits to the right of the decimal point. Then you\n",
    "simply write"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 14,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "[ 3.    5.67  8.33 11.   13.67 16.33 19.  ]\n"
     ]
    }
   ],
   "source": [
    "np.set_printoptions(precision=2)\n",
    "print(a)"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "If you want to change the number of digits to the right of the decimal\n",
    "point to 4, you set the keyword argument `precision` to 4"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 15,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "[ 3.      5.6667  8.3333 11.     13.6667 16.3333 19.    ]\n"
     ]
    }
   ],
   "source": [
    "np.set_printoptions(precision=4)\n",
    "print(a)"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "Suppose you want to use scientific notation. The method for doing it is\n",
    "somewhat arcane, using something called a `lambda` function. For now,\n",
    "you don't need to understand how it works to use it. Just follow the\n",
    "examples shown below, which illustrate several different output formats\n",
    "using the `print` function with NumPy arrays."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 16,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "[3.00e+00 5.67e+00 8.33e+00 1.10e+01 1.37e+01 1.63e+01 1.90e+01]\n"
     ]
    }
   ],
   "source": [
    "np.set_printoptions(formatter={'float': lambda x: format(x, '6.2e')})\n",
    "print(a)"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "To specify the format of the output, you use the `formatter` keyword\n",
    "argument. The first entry to the right of the curly bracket is a string\n",
    "that can be `'float'`, as it is above, or `'int'`, or `'str'`, or a\n",
    "number of other data types that you can look up in the online NumPy\n",
    "documentation. The only other thing you should change is the format\n",
    "specifier string. In the above example, it is `'6.2e'`, specifying that\n",
    "Python should allocate at least 6 spaces, with 2 digits to the right of\n",
    "the decimal point in scientific (exponential) notation. For fixed width\n",
    "floats with 3 digits to the right of the decimal point, use the `f` in\n",
    "place of the `e` format specifier, as follows"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 17,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "[ 3.000  5.667  8.333 11.000 13.667 16.333 19.000]\n"
     ]
    }
   ],
   "source": [
    "np.set_printoptions(formatter={'float': lambda x: format(x, '6.3f')})\n",
    "print(a)"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "To return to the default format, type the following"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 18,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "[ 3.          5.66666667  8.33333333 11.         13.66666667 16.33333333\n",
      " 19.        ]\n"
     ]
    }
   ],
   "source": [
    "np.set_printoptions(precision=8)\n",
    "print(a)"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "The `set_printoptions` is a NumPy function, so if you use it in a script\n",
    "or program, you should call it by writing `np.set_printoptions`."
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "File input\n",
    "----------\n",
    "\n",
    "### Reading data from a text file\n",
    "\n",
    "Often you would like to analyze data that you have stored in a text\n",
    "file. Consider, for example, the data file below for an experiment\n",
    "measuring the free fall of a mass."
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "```\n",
    "Data for falling mass experiment\n",
    "Date: 16-Aug-2013\n",
    "Data taken by Lauren and John\n",
    "\n",
    "data point      time (sec)      height (mm)     uncertainty (mm)\n",
    "    0               0.0             180             3.5\n",
    "    1               0.5             182             4.5\n",
    "    2               1.0             178             4.0\n",
    "    3               1.5             165             5.5\n",
    "    4               2.0             160             2.5\n",
    "    5               2.5             148             3.0\n",
    "    6               3.0             136             2.5\n",
    "    7               3.5             120             3.0\n",
    "    8               4.0              99             4.0\n",
    "    9               4.5              83             2.5\n",
    "   10               5.0              55             3.6\n",
    "   11               5.5              35             1.75\n",
    "   12               6.0               5             0.75\n",
    "```"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "We would like to read these data into a Python program, associating the\n",
    "data in each column with an appropriately named array. While there are a\n",
    "multitude of ways to do this in Python, the simplest by far is to use\n",
    "the NumPy `loadtxt` function, whose use we illustrate here. Suppose that\n",
    "the name of the text file is `MyData.txt`. Then we can read the data\n",
    "into four different arrays with the following statement"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 19,
   "metadata": {},
   "outputs": [],
   "source": [
    "dataPt, time, height, error = np.loadtxt(\"MyData.txt\", skiprows=5 , unpack=True)"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "In this case, the `loadtxt` function takes three arguments: the first is\n",
    "a string that is the name of the file to be read, the second tells\n",
    "`loadtxt` to skip the first 5 lines at the top of file, sometimes called\n",
    "the *header*, and the third tells `loadtxt` to output the data (*unpack*\n",
    "the data) so that it can be directly read into arrays. `loadtxt` reads\n",
    "however many columns of data are present in the text file to the array\n",
    "names listed to the left of the \"`=`\" sign. The names labeling the\n",
    "columns in the text file are not used, but you are free to choose the\n",
    "same or similar names, of course, as long as they are legal array names.\n",
    "By the way, for the above `loadtxt` call to work, the file `MyData.txt`\n",
    "should be in the current working directory of the IPython shell.\n",
    "Otherwise, you need to specify the directory path with the file name.\n",
    "\n",
    "It is critically important that the data file be a *text* file. It\n",
    "cannot be a MSWord file, for example, or an Excel file, or anything\n",
    "other than a plain text file. Such files can be created by a text editor\n",
    "programs like `Notepad` and `Notepad++` (for a PC) or `TextEdit` and\n",
    "`TextWrangler` (for a Mac). They can also be created by MSWord and Excel\n",
    "provided you explicitly save the files as text files. **Beware**: You\n",
    "should exit any text file you make and save it with a program that\n",
    "allows you to save the text file using **UNIX**-type formatting, which\n",
    "uses a *line feed* (LF) to end a line. Some programs, like MSWord under\n",
    "Windows, may include a carriage return (CR) character, which can confuse\n",
    "`loadtxt`. Note that we give the file name a `.txt` *extension*, which\n",
    "indicates to most operating systems that this is a *text* file, as\n",
    "opposed to an Excel file, for example, which might have a `.xlsx` or\n",
    "`.xls` extension.\n",
    "\n",
    "If you don't want to read in all the columns of data, you can specify\n",
    "which columns to read in using the `usecols` key word. For example, the\n",
    "call"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 20,
   "metadata": {},
   "outputs": [],
   "source": [
    "time, height = np.loadtxt('MyData.txt', skiprows=5, usecols = (1,2), unpack=True)"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "reads in only columns 1 and 2; columns 0 and 3 are skipped. As a\n",
    "consequence, only two array names are included to the left of the \"`=`\"\n",
    "sign, corresponding to the two column that are read. Writing\n",
    "`usecols = (0,2,3)` would skip column 1 and read in only the data in\n",
    "colums 0, 2, and 3. In this case, 3 array names would need to be\n",
    "provided on the left hand side of the \"`=`\" sign.\n",
    "\n",
    "One convenient feature of the `loadtxt` function is that it recognizes\n",
    "any *white space* as a column separator: spaces, tabs, *etc.*\n",
    "\n",
    "Finally you should remember that `loadtxt` is a NumPy function. So if\n",
    "you are using it in a Python module, you must be sure to include an\n",
    "\"`import numpy as np`\" statement before calling \"`np.loadtxt`\"."
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "### Reading data from a CSV file\n",
    "\n",
    "Sometimes you have data stored in a spreadsheet program like Excel that\n",
    "you would like to read into a Python program. The `fig-ExcelWindow`\n",
    "shown here contains the same data set we saw above in a text file.\n",
    "\n",
    "<figure>\n",
    "<img src=\"attachment:ExcelDataFile.png\" class=\"align-center\" alt=\"\" /><figcaption>Excel data sheet</figcaption>\n",
    "</figure>\n",
    "\n",
    "While there are a number of different approaches one can use to reading\n",
    "such files, one of the simplest of most robust is to save the\n",
    "spreadsheet as a CSV (\"comma separated value\") file, a format which all\n",
    "common spreadsheet programs can create and read. So, if your Excel\n",
    "spreadsheet was called `MyData.xlsx`, the CSV file saved using Excel's\n",
    "`Save As` command would by default be `MyData.csv`. It would look like\n",
    "this"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "```\n",
    "Data for falling mass experiment,,,\n",
    "Date: 16-Aug-2013,,,\n",
    "Data taken by Lauren and John,,,\n",
    ",,,\n",
    "data point,time (sec),height (mm),uncertainty (mm)\n",
    "0,0,180,3.5\n",
    "1,0.5,182,4.5\n",
    "2,1,178,4\n",
    "3,1.5,165,5.5\n",
    "4,2,160,2.5\n",
    "5,2.5,148,3\n",
    "6,3,136,2.5\n",
    "7,3.5,120,3\n",
    "8,4,99,4\n",
    "9,4.5,83,2.5\n",
    "10,5,55,3.6\n",
    "11,5.5,35,1.75\n",
    "12,6,5,0.75\n",
    "```"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "As its name suggests, the CSV file is simply a text file with the data\n",
    "that was formerly in spreadsheet columns now separated by commas. We can\n",
    "read the data in this file into a Python program using the `loadtxt`\n",
    "NumPy function once again. Here is the code"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 21,
   "metadata": {},
   "outputs": [],
   "source": [
    "dataPt, time, height, error = np.loadtxt(\"MyData.csv\", skiprows=5 , unpack=True, delimiter=',')"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "The form of the function is exactly the same as before except we have\n",
    "added the argument `delimiter=','` that tells `loadtxt` that the columns\n",
    "are separated by commas instead of white space (spaces or tabs), which\n",
    "is the default. Once again, we set the `skiprows` argument to skip the\n",
    "header at the beginning of the file and to start reading at the first\n",
    "row of data. The data are output to the arrays to the right of the\n",
    "assignment operator `=` exactly as in the previous example."
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "File output\n",
    "-----------\n",
    "\n",
    "### Writing data to a text file\n",
    "\n",
    "There is a plethora of ways to write data to a data file in Python. We\n",
    "will stick to one very simple one that's suitable for writing data files\n",
    "in text format. It uses the NumPy `savetxt` routine, which is the\n",
    "counterpart of the `loadtxt` routine introduced in the previous section.\n",
    "The general form of the routine is"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "```\n",
    "np.savetxt(filename, array, fmt=\"%0.18e\", delimiter=\" \", newline=\"\\n\", header=\"\", footer=\"\", comments=\"# \")\n",
    "```"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "We illustrate `savetext` below with a script that first creates four\n",
    "arrays by reading in the data file `MyData.txt`, as discussed in the\n",
    "previous section, and then writes that same data set to another file\n",
    "`MyDataOut.txt`."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 22,
   "metadata": {},
   "outputs": [],
   "source": [
    "import numpy as np\n",
    "\n",
    "dataPt, time, height, error = np.loadtxt(\"MyData.txt\", skiprows=5, unpack=True)\n",
    "np.savetxt('MyDataOut.txt', list(zip(dataPt, time, height, error)), fmt=\"%12.1f\")\n",
    "\n",
    "# Unlike in Python 2, `zip` in Python 3 returns an iterator. For the sake of \n",
    "# this exercise, I have exhausted the iterator with `list` -- Loren."
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "The first argument of of `savetxt` is a string, the name of the data\n",
    "file to be created. Here we have chosen the name `MyDataOut.txt`,\n",
    "inserted with quotes, which designates it as a string literal. Beware,\n",
    "if there is already a file of that name on your computer, it will be\n",
    "overwritten---the old file will be destroyed and a new one will be\n",
    "created.\n",
    "\n",
    "The second argument is the data array the is to be written to the data\n",
    "file. Because we want to write not one but four data arrays to the file,\n",
    "we have to package the four data arrays as one, which we do using the\n",
    "`zip` function, a Python function that combines returns a list of\n",
    "tuples, where the $i^\\mathrm{th}$ tuple contains the $i^\\mathrm{th}$\n",
    "element from each of the arrays (or lists, or tuples) listed as its\n",
    "arguments. Since there are four arrays, each row will be a tuple with\n",
    "four entries, producing a table with four columns. Note that the first\n",
    "two arguments, the filename and data array, are regular arguments and\n",
    "thus must appear as the first and second arguments in the correct order.\n",
    "The remaining arguments are all keyword arguments, meaning that they are\n",
    "optional and can appear in any order, provided you use the keyword.\n",
    "\n",
    "The next argument is a format string that determines how the elements of\n",
    "the array are displayed in the data file. The argument is optional and,\n",
    "if left out, is the format `0.18e`, which displays numbers as 18 digit\n",
    "floats in exponential (scientific) notation. Here we choose a different\n",
    "format, `12.1f`, which is a float displayed with 1 digit to the right of\n",
    "the decimal point and a minimum width of 12. By choosing 12, which is\n",
    "more digits than any of the numbers in the various arrays have, we\n",
    "ensure that all the columns will have the same width. It also ensures\n",
    "that the decimal points in column of numbers are aligned. This is\n",
    "evident in the data file below, <span\n",
    "class=\"title-ref\">MyDataOut.txt</span>, which was produced by the above\n",
    "script."
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "```\n",
    "0.0          0.0        180.0          3.5\n",
    "1.0          0.5        182.0          4.5\n",
    "2.0          1.0        178.0          4.0\n",
    "3.0          1.5        165.0          5.5\n",
    "4.0          2.0        160.0          2.5\n",
    "5.0          2.5        148.0          3.0\n",
    "6.0          3.0        136.0          2.5\n",
    "7.0          3.5        120.0          3.0\n",
    "8.0          4.0         99.0          4.0\n",
    "9.0          4.5         83.0          2.5\n",
    "```"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "We omitted the optional `delimiter` keyword argument, which leaves the\n",
    "delimiter as the default space.\n",
    "\n",
    "We also omitted the optional `header` keyword argument, which is a\n",
    "string variable that allows you to write header text above the data. For\n",
    "example, you might want to label the data columns and also include the\n",
    "information that was in the header of the original data file. To do so,\n",
    "you just need to create a string with the information you want to\n",
    "include and then use the `header` keyword argument. The code below\n",
    "illustrates how to do this."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 23,
   "metadata": {},
   "outputs": [],
   "source": [
    "import numpy as np\n",
    "\n",
    "dataPt, time, height, error = np.loadtxt(\"MyData.txt\", skiprows=5, unpack=True)\n",
    "\n",
    "info = 'Data for falling mass experiment'\n",
    "info += '\\nDate: 16-Aug-2013'\n",
    "info += '\\nData taken by Lauren and John'\n",
    "info += '\\n\\n   data point    time (sec) height (mm)  '\n",
    "info += 'uncertainty (mm)'\n",
    "\n",
    "np.savetxt('MyDataOut.txt', list(zip(dataPt, time, height, error)), header=info, fmt=\"%12.1f\")"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "Now the data file produces has a header preceding the data. Notice that\n",
    "the header rows all start with a `#` comment character, which is the\n",
    "default setting for the `savetxt` function. This can be changed using\n",
    "the keyword argument `comments`. You can find more information about\n",
    "`savetxt` using the IPython `help` function or from the online NumPy\n",
    "documentation."
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "```\n",
    "# Data for falling mass experiment\n",
    "# Date: 16-Aug-2013\n",
    "# Data taken by Lauren and John\n",
    "# \n",
    "#    data point    time (sec) height (mm)  uncertainty (mm)\n",
    "         0.0          0.0        180.0          3.5\n",
    "         1.0          0.5        182.0          4.5\n",
    "         2.0          1.0        178.0          4.0\n",
    "         3.0          1.5        165.0          5.5\n",
    "         4.0          2.0        160.0          2.5\n",
    "         5.0          2.5        148.0          3.0\n",
    "         6.0          3.0        136.0          2.5\n",
    "         7.0          3.5        120.0          3.0\n",
    "         8.0          4.0         99.0          4.0\n",
    "         9.0          4.5         83.0          2.5\n",
    "        10.0          5.0         55.0          3.6\n",
    "        11.0          5.5         35.0          1.8\n",
    "        12.0          6.0          5.0          0.8\n",
    "```"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "### Writing data to a CSV file\n",
    "\n",
    "To produce a CSV file, you would specify a comma as the delimiter. You\n",
    "might use the `0.1f` format specifier, which leaves no extra spaces\n",
    "between the comma data separators, as the file is to be read by a\n",
    "spreadsheet program, which will determine how the numbers are displayed.\n",
    "The code, which could be substituted for the `savetxt` line in the above\n",
    "code reads"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 24,
   "metadata": {},
   "outputs": [],
   "source": [
    "np.savetxt('MyDataOut.csv', list(zip(dataPt, time, height, error)), fmt=\"%0.1f\", delimiter=\",\")"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "and produces the following data file"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "```\n",
    "0.0,0.0,180.0,3.5\n",
    "1.0,0.5,182.0,4.5\n",
    "2.0,1.0,178.0,4.0\n",
    "3.0,1.5,165.0,5.5\n",
    "4.0,2.0,160.0,2.5\n",
    "5.0,2.5,148.0,3.0\n",
    "6.0,3.0,136.0,2.5\n",
    "7.0,3.5,120.0,3.0\n",
    "8.0,4.0,99.0,4.0\n",
    "9.0,4.5,83.0,2.5\n",
    "10.0,5.0,55.0,3.6\n",
    "11.0,5.5,35.0,1.8\n",
    "12.0,6.0,5.0,0.8\n",
    "```"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "This data file, with a `csv` extension, can be directly read into a\n",
    "spreadsheet program like Excel."
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "Exercises\n",
    "---------\n",
    "\n",
    "1.  Write a Python program that calculates how much money you can spend each day for lunch for the rest of the month based on today's date and how much money you currently have in your lunch account. The program should ask you: (1) how much money you have in your account, (2) what today's date is, and (3) how many days there are in month. The program should return your daily allowance. The results of running your program should look like this:"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "```\n",
    "How much money (in dollars) in your lunch account? 118.39\n",
    "\n",
    "What day of the month is today? 17\n",
    "\n",
    "How many days in this month? 30\n",
    "\n",
    "You can spend $8.46 each day for the rest of the month.\n",
    "```"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "*Extra:* Create a dictionary (see `chap3dictionaries`) that stores the number of days in each month (forget about leap years) and have your program ask what month it is rather than the number of days in the month."
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "2.  From the IPython terminal, create the following three NumPy arrays:"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 25,
   "metadata": {},
   "outputs": [],
   "source": [
    "a = np.array([1, 3, 5, 7])\n",
    "b = np.array([8, 7, 5, 4])\n",
    "c = np.array([0, 9,-6,-8])"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "Now use the `zip` function to create the object `d` defined as"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 26,
   "metadata": {},
   "outputs": [],
   "source": [
    "d = zip(a, b, c)"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "Print `d` out at the terminal prompt. What kind of object is `d`?\n",
    "Hint: It is not a NumPy array. Convert `d` into a NumPy array and\n",
    "call that array `e`. Type `e` at the terminal prompt so that `e` is\n",
    "printed out on the IPython terminal. One of the elements of `e` is\n",
    "`-8`. Show how to address and print out just that element of `e`.\n",
    "Show how to address that same element of `d`. What has become of the\n",
    "three original arrays `a`, `b`, and `c`, that is, how do they appear\n",
    "in `e`?"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "3.  Create the following data file and then write a Python script to read it into a three NumPy arrays with the variable names `f`, `a`, `da` for the frequency, amplitude, and amplitude error."
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "```\n",
    "Date: 2013-09-16\n",
    "Data taken by Liam and Selena\n",
    "frequency (Hz) amplitude (mm)  amp error (mm)\n",
    "0.7500         13.52           0.32\n",
    "1.7885         12.11           0.92\n",
    "2.8269         14.27           0.73\n",
    "3.8654         16.60           2.06\n",
    "4.9038         22.91           1.75\n",
    "5.9423         35.28           0.91\n",
    "6.9808         60.99           0.99\n",
    "8.0192         33.38           0.36\n",
    "9.0577         17.78           2.32\n",
    "10.0962        10.99           0.21\n",
    "11.1346         7.47           0.48\n",
    "12.1731         6.72           0.51\n",
    "13.2115         4.40           0.58\n",
    "14.2500         4.07           0.63\n",
    "```"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    " Show that you have correctly read in the data by having your script print out to your computer screen the three arrays. Format the printing so that it produces output like this:"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "```\n",
    "f =\n",
    "[  0.75     1.7885   2.8269   3.8654   4.9038   5.9423\n",
    "   6.9808   8.0192   9.0577  10.0962  11.1346  12.1731\n",
    "   13.2115  14.25  ]\n",
    "a =\n",
    "[ 13.52  12.11  14.27  16.6   22.91  35.28  60.99  33.38\n",
    "  17.78  10.99   7.47   6.72   4.4    4.07]\n",
    "da =\n",
    "[ 0.32  0.92  0.73  2.06  1.75  0.91  0.99  0.36  2.32\n",
    "  0.21  0.48  0.51  0.58  0.63]\n",
    "```"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    " Note that the array `f` is displayed with four digits to the right of the decimal point while the arrays `a` and `da` are displayed with only two. The columns of the displayed arrays need not line up as they do above."
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "4.  Write a script to read the data from the previous problem into three NumPy arrays with the variable names `f`, `a`, `da` for the frequency, amplitude, and amplitude error and then, in the same script, write the data out to a data file, including the header, with the data displayed in three columns, just as its displayed in the problem above. It's ok if the header lines begin with the `#` comment character. Your data file should have the extension `.txt`."
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "5.  Write a script to read the data from the previous problem into three NumPy arrays with the variable names `f`, `a`, `da` for the frequency, amplitude, and amplitude error and then, in the same script, write the data out to a csv data file, without the header, to a data file with the data displayed in three columns. Use a single format specifier and set it to `\"%0.16e\"`. If you have access the spreadsheet program (like MS Excel), try opening the file you have created with your Python script and verify that the arrays are displayed in three columns. Note that your csv file should have the extension `.csv`."
   ]
  }
 ],
 "metadata": {
  "jupytext": {
   "cell_metadata_filter": "all",
   "formats": "ipynb,py:percent",
   "notebook_metadata_filter": "all,-language_info"
  },
  "kernelspec": {
   "display_name": "Python 3",
   "language": "python",
   "name": "python3"
  },
  "language_info": {
   "codemirror_mode": {
    "name": "ipython",
    "version": 3
   },
   "file_extension": ".py",
   "mimetype": "text/x-python",
   "name": "python",
   "nbconvert_exporter": "python",
   "pygments_lexer": "ipython3",
   "version": "3.7.6"
  },
  "toc": {
   "base_numbering": 1,
   "nav_menu": {},
   "number_sections": true,
   "sideBar": true,
   "skip_h1_title": false,
   "title_cell": "Table of Contents",
   "title_sidebar": "Contents",
   "toc_cell": true,
   "toc_position": {},
   "toc_section_display": true,
   "toc_window_display": true
  }
 },
 "nbformat": 4,
 "nbformat_minor": 5
}
